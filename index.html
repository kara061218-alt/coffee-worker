<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>yurucafe | The Academic & Social Practice</title>
    <style>
        :root {
            --bg: #000000;
            --surface: #0a0a0a;
            --border: #222222;
            --text-main: #ffffff;
            --text-sub: #d1d1d1;
            --accent: #ffffff;
        }

        body, html {
            margin: 0; padding: 0; background-color: var(--bg); color: var(--text-main);
            font-family: "Inter", "Helvetica Neue", Arial, "Hiragino Sans", "Hiragino Kaku Gothic ProN", sans-serif;
            font-weight: 300; line-height: 1.8; overflow-x: hidden;
        }

        /* Page Transition */
        .page { display: none; min-height: 100vh; animation: fadeIn 1.2s cubic-bezier(0.16, 1, 0.3, 1); }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Navigation */
        nav {
            position: fixed; top: 0; width: 100%; padding: 40px 5vw;
            display: flex; justify-content: space-between; align-items: center; z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            box-sizing: border-box;
        }
        .logo { font-size: 0.9rem; letter-spacing: 0.5em; cursor: pointer; font-weight: 400; text-transform: uppercase; }
        .nav-right { display: flex; align-items: center; }
        .nav-links span { margin-left: 30px; font-size: 0.7rem; letter-spacing: 0.2em; cursor: pointer; opacity: 0.7; transition: 0.4s; }
        .nav-links span:hover { opacity: 1; }
        
        .lang-switch {
            margin-left: 40px; display: flex; gap: 15px; font-size: 0.7rem;
            letter-spacing: 0.1em; border-left: 1px solid var(--border); padding-left: 20px;
        }
        .lang-btn { cursor: pointer; opacity: 0.4; transition: 0.3s; }
        .lang-btn.active { opacity: 1; font-weight: 600; }

        .btn {
            display: inline-block; padding: 18px 50px; border: 1px solid #ffffff;
            color: #fff; text-decoration: none; cursor: pointer;
            transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1); font-size: 0.75rem; letter-spacing: 0.3em;
            background: transparent; text-transform: uppercase;
        }
        .btn:hover { background: #fff; color: #000; }

        /* Hero - Typography Adjusted */
        .hero { height: 100vh; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .hero-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=2000') center/cover;
            filter: brightness(35%);
        }
        .hero-content { position: relative; text-align: center; width: 100%; padding: 0 5vw; box-sizing: border-box; }
        
        /* ここでサイズを小さく調整しました */
        .hero h1 { 
            font-size: clamp(3rem, 10vw, 6rem); 
            font-weight: 100; letter-spacing: 0.5em; 
            margin: 0; text-transform: uppercase; line-height: 1.2; padding-left: 0.5em;
        }
        
        .hero p { 
            font-size: 0.8rem; letter-spacing: 0.8em; color: rgba(255,255,255,0.7); 
            margin-top: 40px; margin-bottom: 60px; text-transform: uppercase;
        }

        /* Philosophy Scroll Sections */
        .philosophy-section { padding: 120px 10vw; display: flex; align-items: center; justify-content: space-between; gap: 8vw; min-height: 80vh; }
        .philosophy-section:nth-child(even) { flex-direction: row-reverse; }
        .philo-image { flex: 1; height: 60vh; overflow: hidden; border: 1px solid var(--border); }
        .philo-image img { width: 100%; height: 100%; object-fit: cover; transition: 2s cubic-bezier(0.16, 1, 0.3, 1); }
        .philosophy-section:hover .philo-image img { transform: scale(1.05); }
        .philo-text { flex: 1; max-width: 500px; }
        .philo-text h2 { font-size: 2rem; font-weight: 200; letter-spacing: 0.2em; margin-bottom: 25px; line-height: 1.4; }
        .philo-text p { color: var(--text-sub); font-size: 0.95rem; line-height: 2.2; margin-bottom: 20px; }

        /* Forms & Inputs */
        .finder-container { max-width: 1000px; margin: 0 auto; padding: 120px 5vw; text-align: center; }
        .selector-group { display: flex; justify-content: center; gap: 20px; margin-bottom: 40px; flex-wrap: wrap; }
        .select-box { 
            background: transparent; color: #fff; border: 1px solid var(--border); 
            padding: 12px 20px; font-size: 0.75rem; letter-spacing: 0.2em; cursor: pointer; outline: none; 
        }
        .select-box:hover { border-color: #fff; }
        .select-box option { background: #000; color: #fff; }

        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-top: 30px; }
        .cal-day { 
            aspect-ratio: 1/1; border: 1px solid var(--border); display: flex; align-items: center; 
            justify-content: center; font-size: 0.8rem; cursor: pointer; transition: 0.3s; 
        }
        .cal-day:hover { background: #222; }
        .cal-day.today { border: 2px solid #fff; font-weight: 700; background: rgba(255,255,255,0.05); }
        .cal-day.selected { background: #fff; color: #000; }

        /* Detail Layout */
        .detail-layout { display: grid; grid-template-columns: 1fr 1fr; min-height: 100vh; }
        .detail-img { background: center/cover; border-right: 1px solid var(--border); }
        .detail-body { padding: 100px 8%; display: flex; flex-direction: column; justify-content: center; background-color: var(--surface); }
        .detail-body h2 { font-size: 3rem; font-weight: 100; letter-spacing: 0.2em; margin-bottom: 20px; }
        .detail-meta { font-size: 0.7rem; letter-spacing: 0.3em; color: var(--text-sub); margin-bottom: 40px; border-bottom: 1px solid var(--border); padding-bottom: 20px; text-transform: uppercase; }
        .detail-content p { color: var(--text-sub); margin-bottom: 30px; font-size: 1rem; line-height: 2.2; }
        
        .gallery { display: grid; grid-template-columns: repeat(3, 1fr); gap: 40px; }
        .card { cursor: pointer; }
        .card-img-wrap { height: 50vh; overflow: hidden; border: 1px solid var(--border); }
        .card-img { width: 100%; height: 100%; background: center/cover; transition: 1.2s cubic-bezier(0.19, 1, 0.22, 1); }
        .card:hover .card-img { transform: scale(1.05); }

        footer { padding: 60px 5vw; border-top: 1px solid var(--border); text-align: center; }
        .footer-logo { font-size: 0.7rem; letter-spacing: 0.8em; color: var(--text-main); margin-bottom: 15px; }

        @media (max-width: 1024px) {
            .detail-layout { grid-template-columns: 1fr; }
            .detail-img { height: 40vh; }
            .gallery { grid-template-columns: repeat(2, 1fr); }
            .philosophy-section { flex-direction: column !important; padding: 60px 5vw; gap: 30px; }
            .philo-image { width: 100%; height: 35vh; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo" onclick="showPage('index')">YURUCAFE / STUDY 01</div>
        <div class="nav-right">
            <div class="nav-links">
                <span onclick="showPage('finder')">FINDER</span>
                <span onclick="showPage('cafes')">ARCHIVE</span>
                <span onclick="showPage('booking')">PRACTICE</span>
            </div>
            <div class="lang-switch">
                <div class="lang-btn active" onclick="setLanguage('ja')" id="btn-ja">JP</div>
                <div class="lang-btn" onclick="setLanguage('en')" id="btn-en">EN</div>
            </div>
        </div>
    </nav>

    <section id="index" class="page active">
        <div class="hero">
            <div class="hero-bg"></div>
            <div class="hero-content">
                <h1>Yuru</h1>
                <p>FINDING VALUE IN THE MARGINS</p>
                <div class="btn lang-target" data-ja="探索を始める" data-en="Begin Exploration" onclick="showPage('finder')">探索を始める</div>
            </div>
        </div>
        <div id="philosophy-container"></div>
    </section>

    <section id="finder" class="page">
        <div class="finder-container">
            <div style="text-align: left; margin-bottom: 60px; border-left: 2px solid #fff; padding-left: 30px;">
                <h2 class="lang-target" data-ja="対話の場所を見つける" data-en="Find Your Space">対話の場所を見つける</h2>
                <p class="lang-target" data-ja="場所、日付、時間を選択してください。" data-en="Select location, date, and time."></p>
            </div>

            <div class="selector-group">
                <select id="region-select" class="select-box" onchange="performSearch()">
                    <option value="tokyo">TOKYO (東京)</option>
                    <option value="melbourne">MELBOURNE (メルボルン)</option>
                </select>
                <select id="time-select" class="select-box" onchange="performSearch()">
                    </select>
            </div>

            <div id="calendar-title" style="margin-bottom: 20px; font-size: 1rem; letter-spacing: 0.3em;"></div>
            <div class="calendar-grid" id="finder-calendar"></div>

            <div id="search-results" style="margin-top: 60px;">
                <p id="finder-hint" style="color: var(--text-sub); letter-spacing: 0.1em;"></p>
            </div>
        </div>
    </section>

    <section id="cafes" class="page">
        <div class="container" style="padding: 120px 5vw;">
            <div style="margin-bottom: 80px; border-left: 2px solid #fff; padding-left: 30px;">
                <h2 style="font-size: 1rem; letter-spacing: 0.5em;">ARCHIVE: Partner Spaces</h2>
                <p id="archive-description" class="lang-target" style="margin-top: 20px; color: var(--text-sub);"></p>
            </div>
            <div class="gallery" id="cafe-list"></div>
        </div>
    </section>

    <section id="cafe" class="page">
        <div id="cafe-detail-content"></div>
    </section>

    <section id="booking" class="page">
        <div class="container" style="padding: 120px 5vw; max-width: 800px; margin: 0 auto; text-align: center;">
            <div style="margin-bottom: 60px;">
                <h2>Practice Reservation</h2>
                <p id="booking-description" class="lang-target" style="color: var(--text-sub);"></p>
            </div>
            
            <div class="selector-group">
                <select id="booking-time-select" class="select-box">
                    </select>
            </div>

            <div class="calendar-grid" id="booking-calendar"></div>
            <div id="booking-status" style="margin: 40px 0; font-size: 0.8rem; letter-spacing: 0.1em; height: 20px;"></div>
            <div class="btn lang-target" data-ja="予約リクエストを送信" data-en="Send Reservation Request" onclick="confirmBooking()">予約リクエストを送信</div>
        </div>
    </section>

    <footer>
        <div class="footer-logo">YURUCAFE.ORG</div>
        <div class="footer-copy lang-target" 
             data-ja="© 2025 社会デザインと学術的探求のための学際的プロジェクト" 
             data-en="© 2025 AN INTERDISCIPLINARY PROJECT FOR SOCIAL DESIGN & ACADEMIC EXPLORATION">
        </div>
    </footer>

    <script>
        let currentLang = 'ja';
        let selectedDateFinder = null;
        let selectedDateBooking = null;

        const cafes = [
            { id: 1, name: "灯 - Akari", owner: "Haruki", region: "tokyo", hours: "10:00 - 20:00", img: "https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=1200", meta: "Architecture of Light" },
            { id: 2, name: "Nest", owner: "Mina", region: "tokyo", hours: "08:00 - 18:00", img: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?q=80&w=1200", meta: "Urban Sanctuary" },
            { id: 3, name: "Canvas", owner: "Leo", region: "melbourne", hours: "07:00 - 16:00", img: "https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=1200", meta: "Expressionist Space" },
            { id: 4, name: "Roots", owner: "Elena", region: "melbourne", hours: "09:00 - 21:00", img: "https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=1200", meta: "Origins of Coffee" },
            { id: 5, name: "Silence", owner: "Ken", region: "tokyo", hours: "11:00 - 23:00", img: "https://images.unsplash.com/photo-1461023233267-078af58a4c0c?q=80&w=1200", meta: "Non-verbal Practice" },
            { id: 6, name: "Harbor", owner: "Sofia", region: "melbourne", hours: "08:00 - 22:00", img: "https://images.unsplash.com/photo-1525610553991-2bede1a236e2?q=80&w=1200", meta: "Cross-Cultural Dock" }
        ];

        const philosophyItems = [
            {
                ja: { title: "鎧を脱ぐ、その場所で。", body: "社会の中で私たちは、常に「何者か」であることを求められます。yurucafeは、そんな肩書きを一度横に置いて、ただの自分に戻れるサードプレイスを目指しています。" },
                en: { title: "Unmasking yourself.", body: "Society constantly demands us to be 'someone.' yurucafe aims to be a 'third place' where you can set aside your titles and return to your true self." },
                img: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=1200"
            },
            {
                ja: { title: "沈黙は、対話の一部。", body: "沈黙は気まずいものではありません。言葉が途切れたその瞬間にこそ、相手の存在を深く感じる時間が流れています。私たちはその「余白」を大切にしています。" },
                en: { title: "Silence as Dialogue.", body: "Silence is not awkward. In the moments when words cease, there is a time to deeply feel the presence of the other. We cherish those margins." },
                img: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?q=80&w=1200"
            },
            {
                ja: { title: "「Yuru」が意味すること。", body: "「ゆる」とは、効率や完璧さを追求しない、心の余白です。硬直した社会の関係性を少しだけゆるめ、差異を認め合う。それがyurucafeが掲げる、対話の根源的な形です。" },
                en: { title: "The Meaning of 'Yuru'.", body: "'Yuru' represents the margin in one's heart that doesn't pursue efficiency or perfection. It's about loosening the rigid social structures and accepting differences. This is the fundamental form of dialogue at yurucafe." },
                img: "https://images.unsplash.com/photo-1517048676732-d65bc937f952?q=80&w=1200"
            }
        ];

        const i18n = {
            archiveDesc: { ja: "yurucafeの思想に共鳴し、対話の実験場として機能するパートナー。モノトーンの世界を鮮やかに彩る個性に触れてください。", en: "Partner spaces functioning as experimental fields for dialogue. Encounter the personalities that color the monotone world." },
            bookingDesc: { ja: "対話イベントへの参加予約。カレンダーと時間帯を選択してください。", en: "Reservation for dialogue events. Please select a date and time." },
            finderHint: { ja: "カレンダーから日付を選んでください", en: "Please select a date from the calendar" }
        };

        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${lang}`).classList.add('active');
            document.querySelectorAll('.lang-target').forEach(el => { if (el.dataset[lang]) el.innerText = el.dataset[lang]; });
            
            renderPhilosophy();
            document.getElementById('archive-description').innerText = i18n.archiveDesc[lang];
            document.getElementById('booking-description').innerText = i18n.bookingDesc[lang];
            
            const hint = document.getElementById('finder-hint');
            if(hint) hint.innerText = i18n.finderHint[lang];

            const activePage = document.querySelector('.page.active');
            if (activePage && activePage.id === 'cafe') {
                const cid = activePage.dataset.cafeId;
                if(cid) renderDetail(parseInt(cid));
            }
            if (activePage && activePage.id === 'cafes') renderCafes();
        }

        function populateTimeOptions() {
            const timeSelects = [document.getElementById('time-select'), document.getElementById('booking-time-select')];
            timeSelects.forEach(sel => {
                if(!sel) return;
                sel.innerHTML = '';
                for(let h=0; h<24; h++) {
                    const timeStr = `${h.toString().padStart(2, '0')}:00`;
                    const opt = document.createElement('option');
                    opt.value = h;
                    opt.innerText = timeStr;
                    sel.appendChild(opt);
                }
            });
        }

        function renderPhilosophy() {
            const container = document.getElementById('philosophy-container');
            if(!container) return;
            container.innerHTML = philosophyItems.map(item => `
                <div class="philosophy-section">
                    <div class="philo-image"><img src="${item.img}" alt=""></div>
                    <div class="philo-text">
                        <h2>${item[currentLang].title}</h2>
                        <p>${item[currentLang].body}</p>
                    </div>
                </div>
            `).join('');
        }

        function generateCalendar(containerId, callback) {
            const container = document.getElementById(containerId);
            if(!container) return;
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const today = now.getDate();
            const monthName = new Intl.DateTimeFormat('en-US', { month: 'long' }).format(now);
            const titleEl = document.getElementById('calendar-title');
            if(titleEl) titleEl.innerText = `${monthName.toUpperCase()} ${year}`;

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            container.innerHTML = '';
            for (let i = 0; i < firstDay; i++) { container.innerHTML += '<div class="cal-day" style="opacity:0; pointer-events:none;"></div>'; }
            for (let d = 1; d <= daysInMonth; d++) {
                const isToday = d === today;
                const dayEl = document.createElement('div');
                dayEl.className = `cal-day ${isToday ? 'today' : ''}`;
                dayEl.innerText = d;
                dayEl.onclick = () => callback(dayEl, d);
                container.appendChild(dayEl);
            }
        }

        function performSearch() {
            if(!selectedDateFinder) return;
            const region = document.getElementById('region-select').value;
            const hour = parseInt(document.getElementById('time-select').value);
            const resultsDiv = document.getElementById('search-results');
            
            const filtered = cafes.filter(c => {
                const [start, end] = c.hours.split(' - ').map(t => parseInt(t.split(':')[0]));
                const isOpen = hour >= start && hour < end;
                return c.region === region && isOpen;
            });
            
            if(filtered.length === 0) {
                resultsDiv.innerHTML = `<p style="opacity:0.5; letter-spacing:0.1em;">${currentLang === 'ja' ? '該当するカフェが見つかりませんでした' : 'No spaces found for this criteria'}</p>`;
                return;
            }

            resultsDiv.innerHTML = filtered.map(c => `
                <div class="result-card" style="display:flex; background:var(--surface); border:1px solid var(--border); margin-bottom:20px; cursor:pointer;" onclick="showPage('cafe', ${c.id})">
                    <div style="width:200px; height:150px; background:url('${c.img}') center/cover;"></div>
                    <div style="padding:20px; flex:1;">
                        <span style="font-size:0.6rem; color:var(--text-sub); letter-spacing:0.2em;">${c.region.toUpperCase()} / ${c.hours}</span>
                        <h3 style="margin:10px 0; font-size:1.2rem;">${c.name}</h3>
                        <p style="font-size:0.75rem; opacity:0.7;">${c.meta}</p>
                    </div>
                </div>
            `).join('');
        }

        function showPage(pageId, cafeId = null) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const target = document.getElementById(pageId);
            target.classList.add('active');
            target.dataset.cafeId = cafeId || "";
            window.scrollTo(0, 0);

            if (pageId === 'cafes') renderCafes();
            if (pageId === 'finder') {
                selectedDateFinder = null;
                populateTimeOptions();
                generateCalendar('finder-calendar', (el, d) => {
                    document.querySelectorAll('#finder-calendar .cal-day').forEach(i => i.classList.remove('selected'));
                    el.classList.add('selected');
                    selectedDateFinder = d;
                    performSearch();
                });
            }
            if (pageId === 'booking') {
                populateTimeOptions();
                generateCalendar('booking-calendar', (el, d) => {
                    document.querySelectorAll('#booking-calendar .cal-day').forEach(i => i.classList.remove('selected'));
                    el.classList.add('selected');
                    selectedDateBooking = d;
                    const time = document.getElementById('booking-time-select').value.padStart(2, '0') + ":00";
                    const msg = currentLang === 'ja' ? `${d}日 ${time} を選択中` : `SELECTED: ${d} AT ${time}`;
                    document.getElementById('booking-status').innerText = msg;
                });
            }
            if (pageId === 'cafe' && cafeId) renderDetail(cafeId);
        }

        function renderCafes() {
            document.getElementById('cafe-list').innerHTML = cafes.map(c => `
                <div class="card" onclick="showPage('cafe', ${c.id})">
                    <div class="card-img-wrap"><div class="card-img" style="background-image: url('${c.img}')"></div></div>
                    <div style="margin-top:20px;">
                        <h3 style="font-size:1.1rem; letter-spacing:0.1em;">${c.name}</h3>
                        <p style="font-size:0.7rem; opacity:0.5; letter-spacing:0.2em;">${c.region.toUpperCase()} / OPEN: ${c.hours}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderDetail(id) {
            const c = cafes.find(x => x.id === id);
            const content = document.getElementById('cafe-detail-content');
            
            const detailText = {
                ja: {
                    story: `<p>店主 ${c.owner} は、この空間における「沈黙」を一つの表現形式として捉えています。対話とは単に言葉を交わすことではなく、相手の存在を静かに受け入れ、共有すること。そのための装置として、一杯のコーヒーが丁寧に淹れられます。</p>
                           <p>ここでは、肩書きや属性を一度忘れ、自分自身の「個」として座ることが奨励されます。不完全な言葉であっても、それを補うための豊かな沈黙がここには用意されています。</p>`,
                    hoursLabel: "営業時間",
                    bookLabel: "この空間を予約する"
                },
                en: {
                    story: `<p>The owner, ${c.owner}, views "silence" in this space as a form of expression. Dialogue is not just about exchanging words, but about quietly accepting and sharing the presence of the other.</p>
                           <p>Here, you are encouraged to forget titles or attributes and sit simply as your "individual self." A rich silence is prepared to complement even incomplete words.</p>`,
                    hoursLabel: "Opening Hours",
                    bookLabel: "Book This Space"
                }
            };

            content.innerHTML = `
                <div class="detail-layout">
                    <div class="detail-img" style="background-image: url('${c.img}')"></div>
                    <div class="detail-body">
                        <span class="detail-meta">CASE STUDY / 0${c.id} / ${c.region.toUpperCase()}</span>
                        <h2>${c.name}</h2>
                        <div style="margin-bottom:30px; font-size:0.8rem; letter-spacing:0.2em; color:#fff;">
                            ${detailText[currentLang].hoursLabel}: ${c.hours}
                        </div>
                        <div class="detail-content">${detailText[currentLang].story}</div>
                        <div class="btn" onclick="showPage('booking')" style="margin-top: 40px;">${detailText[currentLang].bookLabel}</div>
                    </div>
                </div>
            `;
        }

        function confirmBooking() {
            if(!selectedDateBooking) {
                alert(currentLang === 'ja' ? '日付を選択してください' : 'Please select a date');
                return;
            }
            const time = document.getElementById('booking-time-select').value.padStart(2, '0') + ":00";
            const msg = currentLang === 'ja' 
                ? `${selectedDateBooking}日 ${time} の予約リクエストを送信しました。` 
                : `Reservation request for day ${selectedDateBooking} at ${time} has been sent.`;
            alert(msg);
        }

        window.onload = () => {
            setLanguage('ja');
            populateTimeOptions();
        };
    </script>
</body>
</html>
